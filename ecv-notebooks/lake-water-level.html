
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Tutorial: Visualising Lake Water Level (LWL) timeseries &#8212; C3S Training</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=4ec06e9971c5264fbd345897d5258098f11cc577" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=8bf782fb4ee92b3d3646425e50f299c4e1fd152d"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ecv-notebooks/lake-water-level';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Visualising Lake Surface Water Temperature (LSWT) as timeseries at one location on a given lake and the spatial distribution of the LSWT for a given day" href="lake-surface-water-temperature.html" />
    <link rel="prev" title="Soil Moisture Anomaly Analysis" href="soil-moisture-anomalies.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../intro.html">

  
  
  
  
  
  
  

  
    <img src="../_static/C3S–POS–LINE.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/C3S–POS–LINE.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cds-tutorial.html">
                        CDS tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reanalysis-climatology.html">
                        Climatology
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reanalysis-heatwave.html">
                        Heatwave Analysis
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../projections-cmip6.html">
                        Climate Projections (CMIP6)
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../projections-cordex.html">
                        Climate Projections (CORDEX)
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../sf-anomalies.html">
                        Seasonal Forecast Anomalies
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../sf-verification.html">
                        Seasonal Forecast Verification
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../ci-windchill.html">
                        Windchill Index Calculation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="erb-outgoing-longwave-radiation.html">
                        Outgoing Longwave Radiation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="soil-moisture-anomalies.html">
                        Soil Moisture Anomaly Analysis
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Lake Water Level Timeseries
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="lake-surface-water-temperature.html">
                        Lake Surface Water Temperature Analysis
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cems-notebooks/visualising-fwi-for-esotc.html">
                        Visualising fire weather index (FWI)
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cems-notebooks/glofas-bangladesh-floods.html">
                        Observing major flood events
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://ibicus.readthedocs.io/en/latest/getting_started/overview.html">
                        Python library (ibicus) and tutorials on bias correction
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://ecmwf-projects.github.io/copernicus-training-cams/">
                        Tutorials from the Copernicus Atmosphere Monitoring Service (CAMS)
                      </a>
                    </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cds-tutorial.html">
                        CDS tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reanalysis-climatology.html">
                        Climatology
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reanalysis-heatwave.html">
                        Heatwave Analysis
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../projections-cmip6.html">
                        Climate Projections (CMIP6)
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../projections-cordex.html">
                        Climate Projections (CORDEX)
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../sf-anomalies.html">
                        Seasonal Forecast Anomalies
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../sf-verification.html">
                        Seasonal Forecast Verification
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../ci-windchill.html">
                        Windchill Index Calculation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="erb-outgoing-longwave-radiation.html">
                        Outgoing Longwave Radiation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="soil-moisture-anomalies.html">
                        Soil Moisture Anomaly Analysis
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Lake Water Level Timeseries
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="lake-surface-water-temperature.html">
                        Lake Surface Water Temperature Analysis
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cems-notebooks/visualising-fwi-for-esotc.html">
                        Visualising fire weather index (FWI)
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cems-notebooks/glofas-bangladesh-floods.html">
                        Observing major flood events
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://ibicus.readthedocs.io/en/latest/getting_started/overview.html">
                        Python library (ibicus) and tutorials on bias correction
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://ecmwf-projects.github.io/copernicus-training-cams/">
                        Tutorials from the Copernicus Atmosphere Monitoring Service (CAMS)
                      </a>
                    </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item">
  


<a class="navbar-brand logo" href="../intro.html">

  
  
  
  
  
  
  

  
    <img src="../_static/C3S–POS–LINE.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/C3S–POS–LINE.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    </div>
    <div class="sidebar-start-items__item">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Copernicus Climate Change Service (C3S) Data Tutorials
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Climate Data Store (CDS)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../cds-tutorial.html">CDS tutorial</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reanalysis Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../reanalysis-climatology.html">Climatology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reanalysis-heatwave.html">Heatwave Analysis</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials on Climate Projections</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../projections-cmip6.html">Climate Projections (CMIP6)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projections-cordex.html">Climate Projections (CORDEX)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials on Seasonal Forecasts</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../sf-anomalies.html">Seasonal Forecast Anomalies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sf-verification.html">Seasonal Forecast Verification</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials on Climate Indices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ci-windchill.html">Windchill Index Calculation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials using Satellite Observations</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="erb-outgoing-longwave-radiation.html">Outgoing Longwave Radiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="soil-moisture-anomalies.html">Soil Moisture Anomaly Analysis</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Tutorial: Visualising Lake Water Level (LWL) timeseries</a></li>




<li class="toctree-l1"><a class="reference internal" href="lake-surface-water-temperature.html">Lake Surface Water Temperature Analysis</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Turorials using Copernicus Emergency Management Service data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../cems-notebooks/visualising-fwi-for-esotc.html">Visualising fire weather index (FWI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cems-notebooks/glofas-bangladesh-floods.html">Observing major flood events</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials on Bias Correction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://ibicus.readthedocs.io/en/latest/getting_started/overview.html">Python library (ibicus) and tutorials on bias correction</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Atmosphere Monitoring Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://ecmwf-projects.github.io/copernicus-training-cams/">Tutorials from the Copernicus Atmosphere Monitoring Service (CAMS)</a></li>
</ul>

    </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        <label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" data-toggle="tooltip" data-placement="right" title="Toggle primary sidebar">
            <span class="fa-solid fa-bars"></span>
        </label>
    </div>
    <div class="header-article__right">


<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="https://mybinder.org/v2/gh/ecmwf-projects/copernicus-training-c3s-review/review?urlpath=tree/ecv-notebooks/lake-water-level.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</a>
      
  </ul>
</div>

<button onclick="toggleFullScreen()"
  class="btn btn-sm"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<div class="dropdown dropdown-repository-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="https://github.com/ecmwf-projects/copernicus-training-c3s-review" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">repository</span>
</a>
</a>
      
      <li><a href="https://github.com/ecmwf-projects/copernicus-training-c3s-review/issues/new?title=Issue%20on%20page%20%2Fecv-notebooks/lake-water-level.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">open issue</span>
</a>
</a>
      
  </ul>
</div>



<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="../_sources/ecv-notebooks/lake-water-level.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</a>
      
      <li>
<button onclick="printPdf(this)"
  class="btn btn-sm dropdown-item"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</a>
      
  </ul>
</div>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary" data-toggle="tooltip" data-placement="left" title="Toggle secondary sidebar">
            <span class="fa-solid fa-list"></span>
        </label>
    </div>
</div>
            </div>
            
            

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tutorial: Visualising Lake Water Level (LWL) timeseries</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Tutorial: Visualising Lake Water Level (LWL) timeseries
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-librairies">
     Import librairies
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lake-selection">
   Lake selection
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dowload-and-decompress-data">
     1. Dowload and decompress data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-location">
   2. Visualise lake location
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-water-level-time-series">
   3. Visualise lake water level time series
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-water-level-yearly-anomalies">
   3. Visualise lake water level yearly anomalies
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>

            <article class="bd-article" role="main">
              
  <section class="tex2jax_ignore mathjax_ignore" id="tutorial-visualising-lake-water-level-lwl-timeseries">
<h1>Tutorial: Visualising Lake Water Level (LWL) timeseries<a class="headerlink" href="#tutorial-visualising-lake-water-level-lwl-timeseries" title="Permalink to this heading">#</a></h1>
<p><font color='red'>Before continuing with this tutorial, please verify that the C3S API is installed. All the information about this api is available at: </font></p>
<p><a class="reference external" href="https://cds.climate.copernicus.eu/api-how-to#install-the-cds-api-key">https://cds.climate.copernicus.eu/api-how-to#install-the-cds-api-key</a></p>
<hr class="docutils" />
<p>In this tutorial we will access lake products from the Climate Data Store (CDS) and analyse the timeseries of the lake water level on a selected lake. The tutorial comprises two main steps:</p>
<ol class="arabic simple">
<li><p>Dowload and decompress data</p></li>
<li><p>Visualise the location of the lake in a map</p></li>
<li><p>Visualise and save water level timeseries</p></li>
<li><p>Visualise and save the yearly water level anomalies</p></li>
</ol>
<section id="import-librairies">
<h2>Import librairies<a class="headerlink" href="#import-librairies" title="Permalink to this heading">#</a></h2>
<p>The lake water level data will be download in a zip file containing a NetCDF file. We need libraries to download data from the CDS but also libraires to manage zip files (zipfile library) and  NetCDF files (xarray library). We also use libraries to plot and visualise data (matplotlib and cartopy libraries).</p>
<p>Additional libraires: os and glob are used for file management</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cdsapi</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">cartopy</span> <span class="kn">import</span> <span class="n">crs</span><span class="p">,</span> <span class="n">feature</span>

<span class="o">%</span><span class="k">matplotlib</span> widget
</pre></div>
</div>
</div>
</div>
<p>Current version of the Lake Water Level dataset in CDS (v2.1) contains timeseries from 94 lakes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">available_lakes</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;amadjuak&#39;</span><span class="p">,</span> <span class="s1">&#39;argentino&#39;</span><span class="p">,</span> <span class="s1">&#39;athabasca&#39;</span><span class="p">,</span> <span class="s1">&#39;ayakkum&#39;</span><span class="p">,</span> <span class="s1">&#39;aylmer&#39;</span><span class="p">,</span> <span class="s1">&#39;baikal&#39;</span><span class="p">,</span><span class="s1">&#39;baker&#39;</span><span class="p">,</span> <span class="s1">&#39;balbina&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;balkhash&#39;</span><span class="p">,</span> <span class="s1">&#39;beysehir&#39;</span><span class="p">,</span> <span class="s1">&#39;bosten&#39;</span><span class="p">,</span> <span class="s1">&#39;bratskoye&#39;</span><span class="p">,</span><span class="s1">&#39;cahora_bassa&#39;</span><span class="p">,</span> <span class="s1">&#39;caribou&#39;</span><span class="p">,</span> <span class="s1">&#39;caspian&#39;</span><span class="p">,</span> <span class="s1">&#39;cedar&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;chardarya&#39;</span><span class="p">,</span> <span class="s1">&#39;dagze_co&#39;</span><span class="p">,</span><span class="s1">&#39;des_bois&#39;</span><span class="p">,</span> <span class="s1">&#39;dogaicoring_q&#39;</span><span class="p">,</span> <span class="s1">&#39;dubawnt&#39;</span><span class="p">,</span><span class="s1">&#39;erie&#39;</span><span class="p">,</span> <span class="s1">&#39;fort_peck&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;grande_trois&#39;</span><span class="p">,</span><span class="s1">&#39;greatslave&#39;</span><span class="p">,</span> <span class="s1">&#39;guri&#39;</span><span class="p">,</span> <span class="s1">&#39;har&#39;</span><span class="p">,</span><span class="s1">&#39;hongze&#39;</span><span class="p">,</span> <span class="s1">&#39;hovsgol&#39;</span><span class="p">,</span> <span class="s1">&#39;hulun&#39;</span><span class="p">,</span><span class="s1">&#39;huron&#39;</span><span class="p">,</span> <span class="s1">&#39;issykkul&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;kainji&#39;</span><span class="p">,</span><span class="s1">&#39;kapchagayskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;kara_bogaz_gol&#39;</span><span class="p">,</span> <span class="s1">&#39;kariba&#39;</span><span class="p">,</span><span class="s1">&#39;kasba&#39;</span><span class="p">,</span> <span class="s1">&#39;khanka&#39;</span><span class="p">,</span> <span class="s1">&#39;kokonor&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;krasnoyarskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;kremenchutska&#39;</span><span class="p">,</span> <span class="s1">&#39;kuybyshevskoye&#39;</span><span class="p">,</span><span class="s1">&#39;kyoga&#39;</span><span class="p">,</span> <span class="s1">&#39;ladoga&#39;</span><span class="p">,</span> <span class="s1">&#39;lagoa_dos_patos&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;langa_co&#39;</span><span class="p">,</span> <span class="s1">&#39;lixiodain_co&#39;</span><span class="p">,</span> <span class="s1">&#39;malawi&#39;</span><span class="p">,</span><span class="s1">&#39;manitoba&#39;</span><span class="p">,</span> <span class="s1">&#39;michigan&#39;</span><span class="p">,</span> <span class="s1">&#39;migriggyangzham&#39;</span><span class="p">,</span> <span class="s1">&#39;mossoul&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;mweru&#39;</span><span class="p">,</span> <span class="s1">&#39;namco&#39;</span><span class="p">,</span> <span class="s1">&#39;nasser&#39;</span><span class="p">,</span> <span class="s1">&#39;ngangze&#39;</span><span class="p">,</span> <span class="s1">&#39;ngoring_co&#39;</span><span class="p">,</span> <span class="s1">&#39;nicaragua&#39;</span><span class="p">,</span> <span class="s1">&#39;novosibirskoye&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;nueltin&#39;</span><span class="p">,</span><span class="s1">&#39;onega&#39;</span><span class="p">,</span> <span class="s1">&#39;ontario&#39;</span><span class="p">,</span> <span class="s1">&#39;opinac&#39;</span><span class="p">,</span><span class="s1">&#39;peipus&#39;</span><span class="p">,</span> <span class="s1">&#39;rukwa&#39;</span><span class="p">,</span> <span class="s1">&#39;rybinskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;saint_jean&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;sakakawea&#39;</span><span class="p">,</span> <span class="s1">&#39;saksak&#39;</span><span class="p">,</span><span class="s1">&#39;saratovskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;sarykamish&#39;</span><span class="p">,</span> <span class="s1">&#39;sasykkol&#39;</span><span class="p">,</span><span class="s1">&#39;soungari&#39;</span><span class="p">,</span> <span class="s1">&#39;superior&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;tana&#39;</span><span class="p">,</span><span class="s1">&#39;tanganika&#39;</span><span class="p">,</span> <span class="s1">&#39;tangra_yumco&#39;</span><span class="p">,</span> <span class="s1">&#39;tchad&#39;</span><span class="p">,</span><span class="s1">&#39;tchany&#39;</span><span class="p">,</span> <span class="s1">&#39;tharthar&#39;</span><span class="p">,</span> <span class="s1">&#39;todos_los_santos&#39;</span><span class="p">,</span>
                   <span class="s1">&#39;tsimlyanskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;turkana&#39;</span><span class="p">,</span> <span class="s1">&#39;ulungur&#39;</span><span class="p">,</span><span class="s1">&#39;vanerm&#39;</span><span class="p">,</span> <span class="s1">&#39;victoria&#39;</span><span class="p">,</span> <span class="s1">&#39;volta&#39;</span><span class="p">,</span><span class="s1">&#39;williston&#39;</span><span class="p">,</span> 
                   <span class="s1">&#39;winnipeg&#39;</span><span class="p">,</span> <span class="s1">&#39;winnipegosis&#39;</span><span class="p">,</span><span class="s1">&#39;yellowstone&#39;</span><span class="p">,</span> <span class="s1">&#39;zeyskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;zhari_namco&#39;</span><span class="p">,</span><span class="s1">&#39;ziling&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="lake-selection">
<h1>Lake selection<a class="headerlink" href="#lake-selection" title="Permalink to this heading">#</a></h1>
<p>For downloading and generating the timeserie, two inputs are required:</p>
<ul class="simple">
<li><p>The name of the lake (lake_name). The name of the lake must exists in the list of available lakes</p></li>
<li><p>The output directory name(output_dir) where the different files will be save.</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># the name of the lake</span>
<span class="n">lake_name</span> <span class="o">=</span> <span class="s2">&quot;Baikal&quot;</span>

<span class="c1"># the output directory name </span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="s1">&#39;output&#39;</span>
</pre></div>
</div>
</div>
</div>
<p>A test is performed to verify that the water level for the selected lake is available</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">lake_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">available_lakes</span> <span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The lake &quot;</span><span class="si">{</span><span class="n">lake_name</span><span class="si">}</span><span class="s1">&quot; is not still available&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<p>The output directory must exitst. If it is not the case, it must be created.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The output dir &quot;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">&quot; does not exist. You need to create before continue&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="dowload-and-decompress-data">
<h2>1. Dowload and decompress data<a class="headerlink" href="#dowload-and-decompress-data" title="Permalink to this heading">#</a></h2>
<p>Having the CDS api, this function will retrive the  data for the selected lake into the defined output directory. The downloaded file is compressed (zip format) containing the data file in NetCDF format. For reading the lake water level data, the file will be extracted in the output directory.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="n">lake_name</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">cdsapi</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
<span class="n">c</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span> <span class="s1">&#39;satellite-lake-water-level&#39;</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s1">&#39;lake&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">lake_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()],</span>
                <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="s1">&#39;water_surface_height&#39;</span><span class="p">,</span>
                <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;zip&#39;</span> <span class="c1"># valid formats: zip, tar and tgz</span>
            <span class="p">},</span>
           <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">lake_name</span><span class="si">}</span><span class="s1">.zip&#39;</span>
           <span class="p">)</span>

<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">lake_name</span><span class="si">}</span><span class="s1">.zip&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">z</span><span class="p">:</span>
    <span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    
<span class="c1"># recover the lake filename in netcdf format</span>
<span class="n">nc_file</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">/*</span><span class="si">{</span><span class="n">lake_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s1">*.nc&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># open the file with Xarray</span>
<span class="n">xr_lake</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">nc_file</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;built-in method lower of str object at 0x7fc1c0f8bcf0&gt;
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2023-07-13 11:10:08,598 INFO Welcome to the CDS
2023-07-13 11:10:08,598 INFO Sending request to https://cds.climate.copernicus.eu/api/v2/resources/satellite-lake-water-level
2023-07-13 11:10:08,671 INFO Request is completed
2023-07-13 11:10:08,672 INFO Downloading https://download-0013-clone.copernicus-climate.eu/cache-compute-0013/cache/data2/dataset-satellite-lake-water-level-2266e468-00ea-4829-82d3-37cd29e7a436.zip to output/Baikal.zip (17.2K)
2023-07-13 11:10:08,912 INFO Download rate 72K/s
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="visualise-lake-location">
<h1>2. Visualise lake location<a class="headerlink" href="#visualise-lake-location" title="Permalink to this heading">#</a></h1>
<p>It is always a useful idea to check the lake’s location on a map. Many of the world’s lakes have the same name but may be located in different countries, as in the case of Lake Victoria: the best known is in Uganda, but there is also a Lake Victoria in Canada (48.35N, 57.11W) and another in Australia (34.04S, 141.28E). Or the name of the lake is different, depending on the language: Caribou Lake or Rendeer lake refer to the same lake (Canada). In some cases, even with the same language, lake name can differ between countries: Lake Buenos Aires in Argentina and Lake General Carrera in Chili.</p>
<p>A world map, with the location of the lake is displayed. For generating this figure we use the cartopy library.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">projection</span> <span class="o">=</span> <span class="n">crs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>

<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">feature</span><span class="o">.</span><span class="n">BORDERS</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">stock_img</span><span class="p">()</span>

<span class="c1"># add lake location </span>
<span class="n">lat</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xr_lake</span><span class="o">.</span><span class="n">lake_barycentre_latitude</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">if</span> <span class="s1">&#39;S&#39;</span> <span class="ow">in</span> <span class="n">xr_lake</span><span class="o">.</span><span class="n">lake_barycentre_latitude</span><span class="p">:</span>
    <span class="n">lat</span> <span class="o">=</span> <span class="o">-</span><span class="n">lat</span>
<span class="n">lon</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xr_lake</span><span class="o">.</span><span class="n">lake_barycentre_longitude</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">if</span> <span class="s1">&#39;W&#39;</span> <span class="ow">in</span> <span class="n">xr_lake</span><span class="o">.</span><span class="n">lake_barycentre_longitude</span><span class="p">:</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="o">-</span><span class="n">lon</span>
    
<span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Lake location (lat, lon): </span><span class="si">{</span><span class="n">lat</span><span class="si">}</span><span class="s2">°, </span><span class="si">{</span><span class="n">lon</span><span class="si">}</span><span class="s2">°&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">lon</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">lat</span><span class="p">],</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">crs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "29a2a68832ad434097221ecbabab6deb", "version_major": 2, "version_minor": 0}</script><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Lake location (lat, lon): 53.58°, 108.17°
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.PathCollection at 0x7fc1a0f3d1f0&gt;
</pre></div>
</div>
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="visualise-lake-water-level-time-series">
<h1>3. Visualise lake water level time series<a class="headerlink" href="#visualise-lake-water-level-time-series" title="Permalink to this heading">#</a></h1>
<p>Now that the data has been extracted, we can read it and plot it. To read the data in NetCDF format we use the Xarray library and for the visualisation of the time series we use Matplotlib</p>
<p>The figure with the timeseries will be saved in the output directory in png format:
[lake_name]_timeseries.png file</p>
<p>The change in time step due to coverage by multiple missions can be seen in the figure: in recent years, Lake Baikal has been monitored by multiple missions and trajectories. As a result, the temporal resolution increases (the time between observations is reduced) and the time series is noisier due to the effect of the inter-mission and inter-tracks bias.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plot and visualise the timeseries</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">xr_lake</span><span class="o">.</span><span class="n">water_surface_height_above_reference_datum</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Lake: </span><span class="si">{</span><span class="n">lake_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># save the figure</span>
<span class="n">png_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">lake_name</span><span class="si">}</span><span class="s1">_timeseries.png&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">png_file</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s2">&quot;tight&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "8906559cf98f4ec4bffe639e8a810de9", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="visualise-lake-water-level-yearly-anomalies">
<h1>3. Visualise lake water level yearly anomalies<a class="headerlink" href="#visualise-lake-water-level-yearly-anomalies" title="Permalink to this heading">#</a></h1>
<p>Another way of analysing variations in water levels is to visualise anomalies in relation to average values over a reference period in the form of a bar chart, using red and blue colours to easily identify the year when levels are higher or lower than the climatic normal.</p>
<p>The same code can be used for the visualiation of yearly anomalies compared to a particular year.</p>
<p>The reference period can be adapted to each lake. Indeed, the temporal coverage is not the same for all the lakes in the CDS, with the first available date ranging from 1992, as is the case for Lake Baikal, to 2019 for lakes monitored exclusively by the Sentinel-3B mission. In this example for Lake Baikal, we have chosen a reference period consisting of the first 10 years of data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_reference_year</span> <span class="o">=</span> <span class="mi">1992</span>
<span class="n">last_reference_year</span>  <span class="o">=</span> <span class="mi">2002</span>
</pre></div>
</div>
</div>
</div>
<p>The yearly anomaly is calculated by first applying xarray’s groupby() function to group the data by year and then calculating the mean value for each annual group. The average value of the water in the reference lake is estimated as the average water level over the reference period.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">yearly_mean</span> <span class="o">=</span> <span class="n">xr_lake</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;time.year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">keep_attrs</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">ref</span> <span class="o">=</span> <span class="n">yearly_mean</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">yearly_mean</span><span class="o">.</span><span class="n">year</span> <span class="o">&gt;=</span> <span class="n">first_reference_year</span> <span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">yearly_mean</span><span class="o">.</span><span class="n">year</span> <span class="o">&lt;=</span> <span class="n">last_reference_year</span> <span class="p">))</span>
<span class="n">ref_lwl_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">water_surface_height_above_reference_datum</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Mean LWL value during the reference period: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">ref_lwl_mean</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s1"> (m)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Mean LWL value during the reference period: 455.386 (m)
</pre></div>
</div>
</div>
</div>
<p>The yearly anomaly is shown in red for values above the average water level during the reference period and in blue for values below.</p>
<p>The figure with the anomalies is saved in the output directory in png format :
[lake_name]_yearly-anomalies.png file</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">year_mean</span> <span class="o">=</span> <span class="n">yearly_mean</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
<span class="n">year_mean</span><span class="p">[</span><span class="s1">&#39;lwl_yearly_anomaly&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">year_mean</span><span class="p">[</span><span class="s1">&#39;water_surface_height_above_reference_datum&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">ref_lwl_mean</span>
<span class="n">year_mean</span><span class="p">[</span><span class="s1">&#39;positive_anomaly&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">year_mean</span><span class="p">[</span><span class="s1">&#39;lwl_yearly_anomaly&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">year_mean</span><span class="p">[</span><span class="s1">&#39;lwl_yearly_anomaly&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> 
                                     <span class="n">color</span> <span class="o">=</span> <span class="n">year_mean</span><span class="o">.</span><span class="n">positive_anomaly</span><span class="o">.</span><span class="n">map</span> <span class="p">({</span><span class="kc">True</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">}),</span>
                                     <span class="n">xlabel</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Year&#39;</span><span class="p">,</span>
                                     <span class="n">ylabel</span> <span class="o">=</span> <span class="s1">&#39;Lake Water Level Anomaly (m)&#39;</span><span class="p">,</span>
                                     <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Yearly water level anomalies on Lake </span><span class="si">{</span><span class="n">lake_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s1"> reference period:  </span><span class="si">{</span><span class="n">first_reference_year</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">last_reference_year</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>

<span class="c1"># save the figure</span>
<span class="n">png_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">lake_name</span><span class="si">}</span><span class="s1">_yearly-anomalies.png&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">png_file</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<script type="application/vnd.jupyter.widget-view+json">{"model_id": "056ce74bcaff4306886cd61bf487167e", "version_major": 2, "version_minor": 0}</script></div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./ecv-notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

            </article>
            

            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="soil-moisture-anomalies.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title"><strong>Soil Moisture Anomaly Analysis</strong></p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="lake-surface-water-temperature.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Visualising Lake Surface Water Temperature (LSWT) as timeseries at one location on a given lake and the spatial distribution of the LSWT for a given day</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Tutorial: Visualising Lake Water Level (LWL) timeseries
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-librairies">
     Import librairies
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lake-selection">
   Lake selection
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dowload-and-decompress-data">
     1. Dowload and decompress data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-location">
   2. Visualise lake location
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-water-level-time-series">
   3. Visualise lake water level time series
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-water-level-yearly-anomalies">
   3. Visualise lake water level yearly anomalies
  </a>
 </li>
</ul>

</nav>
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By the Copernicus Climate Change Service (C3S), entrusted to ECMWF (European Centre for Medium-Range Weather Forecasts)
</p>

  </div>
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2022.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
Last updated on None.<br>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </div>
        </footer>
        

      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  </body>
</html>