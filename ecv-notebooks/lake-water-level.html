
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Tutorial: Visualising Lake Water Level (LWL) timeseries &#8212; C3S Training</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/bootstrap.css?digest=796348d33e8b1d947c94" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=796348d33e8b1d947c94" rel="stylesheet">

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=796348d33e8b1d947c94" rel="stylesheet">
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2">
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=4ec06e9971c5264fbd345897d5258098f11cc577" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94">
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=8bf782fb4ee92b3d3646425e50f299c4e1fd152d"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'ecv-notebooks/lake-water-level';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Visualising Lake Surface Water Temperature (LSWT) as timeseries at one location on a given lake and the spatial distribution of the LSWT for a given day" href="lake-surface-water-temperature.html" />
    <link rel="prev" title="C3S Soil Moisture Data Access and Anomaly Analysis Notebook" href="soil-moisture-anomalies.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>

  
  <input type="checkbox" class="sidebar-toggle" name="__primary" id="__primary">
  <label class="overlay overlay-primary" for="__primary"></label>

  
  <input type="checkbox" class="sidebar-toggle" name="__secondary" id="__secondary">
  <label class="overlay overlay-secondary" for="__secondary"></label>

  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
      
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
  </div>

  
  <nav class="bd-header navbar navbar-expand-lg bd-navbar" id="navbar-main"><div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
      <span class="fa-solid fa-bars"></span>
  </label>
  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../intro.html">

  
  
  
  
  
  
  

  
    <img src="../_static/C3S–POS–LINE.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/C3S–POS–LINE.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  
  <div class="col-lg-9 navbar-header-items">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cds-tutorial.html">
                        CDS tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reanalysis-climatology.html">
                        Climatology
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reanalysis-heatwave.html">
                        Heatwave Analysis
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../projections-cmip6.html">
                        Climate Projections (CMIP6)
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../projections-cordex.html">
                        Climate Projections (CORDEX)
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../sf-anomalies.html">
                        Seasonal Forecast Anomalies
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../sf-verification.html">
                        Seasonal Forecast Verification
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../ci-windchill.html">
                        Windchill Index Calculation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="erb-outgoing-longwave-radiation.html">
                        Outgoing Longwave Radiation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="erb-clara-climatologies.html">
                        Earth radiation budget climatologies
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="total-solar-irradiance.html">
                        Total Solar Irradiance
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="total-column-water-vapour-combi.html">
                        Total column water vapour
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="cloud-cover-climatology.html">
                        Cloud fractional cover climatology
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="soil-moisture-anomalies.html">
                        Soil Moisture Anomaly Analysis
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Lake Water Level Timeseries
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="lake-surface-water-temperature.html">
                        Lake Surface Water Temperature Analysis
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="greenhouse-gases-level2-products.html">
                        Greenhouse Gas Level 2 Products
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="greenhouse-gases-level3-products.html">
                        Greenhouse Gas Level 3 Products
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="aerosol-single-sensor-demonstrator.html">
                        C3S Aerosol
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="aerosol-multi-sensor-record.html">
                        C3S Aerosol
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="total-ozone-columns.html">
                        Demonstration on how to plot  ozone datasets on the CDS.
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cems-notebooks/visualising-fwi-for-esotc.html">
                        Visualising fire weather index (FWI)
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cems-notebooks/glofas-bangladesh-floods.html">
                        Observing major flood events
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://ibicus.readthedocs.io/en/latest/getting_started/overview.html">
                        Python library (ibicus) and tutorials on bias correction
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://ecmwf-projects.github.io/copernicus-training-cams/">
                        Tutorials from the Copernicus Atmosphere Monitoring Service (CAMS)
                      </a>
                    </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
    </div>

    <div id="navbar-end">
      
        <div class="navbar-end-item navbar-persistent--container">
          
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
        </div>
      
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>


  
  
    <div class="navbar-persistent--mobile">
<button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-toggle="tooltip">
  <i class="fa-solid fa-magnifying-glass"></i>
</button>
    </div>
  

  
  <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
  </label>
  

</div>
  </nav>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        
  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
      
      <div class="navbar-center-item">
        <nav class="navbar-nav">
    <p class="sidebar-header-items__title" role="heading" aria-level="1" aria-label="Site Navigation">
        Site Navigation
    </p>
    <ul id="navbar-main-elements" class="navbar-nav">
        
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cds-tutorial.html">
                        CDS tutorial
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reanalysis-climatology.html">
                        Climatology
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../reanalysis-heatwave.html">
                        Heatwave Analysis
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../projections-cmip6.html">
                        Climate Projections (CMIP6)
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../projections-cordex.html">
                        Climate Projections (CORDEX)
                      </a>
                    </li>
                
            <div class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    More
                </button>
                <div class="dropdown-menu">
                    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../sf-anomalies.html">
                        Seasonal Forecast Anomalies
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../sf-verification.html">
                        Seasonal Forecast Verification
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../ci-windchill.html">
                        Windchill Index Calculation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="erb-outgoing-longwave-radiation.html">
                        Outgoing Longwave Radiation
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="erb-clara-climatologies.html">
                        Earth radiation budget climatologies
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="total-solar-irradiance.html">
                        Total Solar Irradiance
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="total-column-water-vapour-combi.html">
                        Total column water vapour
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="cloud-cover-climatology.html">
                        Cloud fractional cover climatology
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="soil-moisture-anomalies.html">
                        Soil Moisture Anomaly Analysis
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="#">
                        Lake Water Level Timeseries
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="lake-surface-water-temperature.html">
                        Lake Surface Water Temperature Analysis
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="greenhouse-gases-level2-products.html">
                        Greenhouse Gas Level 2 Products
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="greenhouse-gases-level3-products.html">
                        Greenhouse Gas Level 3 Products
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="aerosol-single-sensor-demonstrator.html">
                        C3S Aerosol
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="aerosol-multi-sensor-record.html">
                        C3S Aerosol
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="total-ozone-columns.html">
                        Demonstration on how to plot  ozone datasets on the CDS.
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cems-notebooks/visualising-fwi-for-esotc.html">
                        Visualising fire weather index (FWI)
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../cems-notebooks/glofas-bangladesh-floods.html">
                        Observing major flood events
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://ibicus.readthedocs.io/en/latest/getting_started/overview.html">
                        Python library (ibicus) and tutorials on bias correction
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-external" href="https://ecmwf-projects.github.io/copernicus-training-cams/">
                        Tutorials from the Copernicus Atmosphere Monitoring Service (CAMS)
                      </a>
                    </li>
                
                </div>
            </div>
            
    </ul>
</nav>
      </div>
      
      </div>
    

    
    
    <div class="sidebar-header-items__end">
      
      <div class="navbar-end-item">
        <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
</button>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
    
  </div>

  
  <div class="sidebar-start-items sidebar-primary__section">
    <div class="sidebar-start-items__item">
  


<a class="navbar-brand logo" href="../intro.html">

  
  
  
  
  
  
  

  
    <img src="../_static/C3S–POS–LINE.png" class="logo__image only-light" alt="Logo image">
    <img src="../_static/C3S–POS–LINE.png" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    </div>
    <div class="sidebar-start-items__item">
<form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
    </div>
    <div class="sidebar-start-items__item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Copernicus Climate Change Service (C3S) Data Tutorials
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Climate Data Store (CDS)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../cds-tutorial.html">CDS tutorial</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Reanalysis Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../reanalysis-climatology.html">Climatology</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reanalysis-heatwave.html">Heatwave Analysis</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials on Climate Projections</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../projections-cmip6.html">Climate Projections (CMIP6)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../projections-cordex.html">Climate Projections (CORDEX)</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials on Seasonal Forecasts</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../sf-anomalies.html">Seasonal Forecast Anomalies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sf-verification.html">Seasonal Forecast Verification</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials on Climate Indices</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ci-windchill.html">Windchill Index Calculation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials using Satellite Observations</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="erb-outgoing-longwave-radiation.html">Outgoing Longwave Radiation</a></li>
<li class="toctree-l1"><a class="reference internal" href="erb-clara-climatologies.html">Earth radiation budget climatologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="total-solar-irradiance.html">Total Solar Irradiance</a></li>
<li class="toctree-l1"><a class="reference internal" href="total-column-water-vapour-combi.html">Total column water vapour</a></li>
<li class="toctree-l1"><a class="reference internal" href="cloud-cover-climatology.html">Cloud fractional cover climatology</a></li>
<li class="toctree-l1"><a class="reference internal" href="soil-moisture-anomalies.html">Soil Moisture Anomaly Analysis</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Tutorial: Visualising Lake Water Level (LWL) timeseries</a></li>




<li class="toctree-l1"><a class="reference internal" href="lake-surface-water-temperature.html">Lake Surface Water Temperature Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="greenhouse-gases-level2-products.html">Greenhouse Gas Level 2 Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="greenhouse-gases-level3-products.html">Greenhouse Gas Level 3 Products</a></li>
<li class="toctree-l1"><a class="reference internal" href="aerosol-single-sensor-demonstrator.html">C3S Aerosol</a></li>



<li class="toctree-l1"><a class="reference internal" href="aerosol-multi-sensor-record.html">C3S Aerosol</a></li>
<li class="toctree-l1"><a class="reference internal" href="total-ozone-columns.html">Demonstration on how to plot  ozone datasets on the CDS.</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Turorials using Copernicus Emergency Management Service data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../cems-notebooks/visualising-fwi-for-esotc.html">Visualising fire weather index (FWI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cems-notebooks/glofas-bangladesh-floods.html">Observing major flood events</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Tutorials on Bias Correction</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://ibicus.readthedocs.io/en/latest/getting_started/overview.html">Python library (ibicus) and tutorials on bias correction</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Atmosphere Monitoring Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference external" href="https://ecmwf-projects.github.io/copernicus-training-cams/">Tutorials from the Copernicus Atmosphere Monitoring Service (CAMS)</a></li>
</ul>

    </div>
</nav>
    </div>
  </div>
  

  
  <div class="sidebar-end-items sidebar-primary__section">
    <div class="sidebar-end-items__item">
    </div>
  </div>

  
  <div id="rtd-footer-container"></div>

      </div>
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

        <div class="bd-content">
          <div class="bd-article-container">
            
            <div class="bd-header-article">
                



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        <label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" data-toggle="tooltip" data-placement="right" title="Toggle primary sidebar">
            <span class="fa-solid fa-bars"></span>
        </label>
    </div>
    <div class="header-article__right">


<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="https://mybinder.org/v2/gh/ecmwf-projects/copernicus-training-c3s-review/review?urlpath=tree/ecv-notebooks/lake-water-level.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Launch on Binder"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</a>
      
  </ul>
</div>

<button onclick="toggleFullScreen()"
  class="btn btn-sm"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<div class="dropdown dropdown-repository-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="https://github.com/ecmwf-projects/copernicus-training-c3s-review" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">repository</span>
</a>
</a>
      
      <li><a href="https://github.com/ecmwf-projects/copernicus-training-c3s-review/issues/new?title=Issue%20on%20page%20%2Fecv-notebooks/lake-water-level.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">open issue</span>
</a>
</a>
      
  </ul>
</div>



<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      <li><a href="../_sources/ecv-notebooks/lake-water-level.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</a>
      
      <li>
<button onclick="printPdf(this)"
  class="btn btn-sm dropdown-item"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</a>
      
  </ul>
</div>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary" data-toggle="tooltip" data-placement="left" title="Toggle secondary sidebar">
            <span class="fa-solid fa-list"></span>
        </label>
    </div>
</div>
            </div>
            
            

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Tutorial: Visualising Lake Water Level (LWL) timeseries</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Tutorial: Visualising Lake Water Level (LWL) timeseries
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-librairies">
     Import librairies
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#set-up-an-output-directory-to-store-data-and-plots">
       Set up an output directory to store data and plots
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lake-selection">
   Lake selection
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dowload-and-decompress-data">
     1. Dowload and decompress data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-location">
   2. Visualise lake location
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-water-level-time-series">
   3. Visualise lake water level time series
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-water-level-yearly-anomalies">
   3. Visualise lake water level yearly anomalies
  </a>
 </li>
</ul>

            </nav>
        </div>
    </div>
</div>

            <article class="bd-article" role="main">
              
  <p><img alt="logo" src="../_images/LogoLine_horizon_C3S.png" /></p>
<section class="tex2jax_ignore mathjax_ignore" id="tutorial-visualising-lake-water-level-lwl-timeseries">
<h1>Tutorial: Visualising Lake Water Level (LWL) timeseries<a class="headerlink" href="#tutorial-visualising-lake-water-level-lwl-timeseries" title="Permalink to this heading">#</a></h1>
<p><font color='red'>Before continuing with this tutorial, please verify that the C3S API is installed. All the information about this api is available at: </font></p>
<p><a class="reference external" href="https://cds.climate.copernicus.eu/api-how-to#install-the-cds-api-key">https://cds.climate.copernicus.eu/api-how-to#install-the-cds-api-key</a></p>
<hr class="docutils" />
<p>In this tutorial we will access lake products from the Climate Data Store (CDS) and analyse the timeseries of the lake water level on a selected lake. The tutorial comprises two main steps:</p>
<ol class="arabic simple">
<li><p>Dowload and decompress data</p></li>
<li><p>Visualise the location of the lake in a map</p></li>
<li><p>Visualise and save water level timeseries</p></li>
<li><p>Visualise and save the yearly water level anomalies</p></li>
</ol>
<section id="import-librairies">
<h2>Import librairies<a class="headerlink" href="#import-librairies" title="Permalink to this heading">#</a></h2>
<p>The lake water level data will be download in a zip file containing a NetCDF file. We need libraries to download data from the CDS but also libraires to manage zip files (zipfile library) and  NetCDF files (xarray library). We also use libraries to plot and visualise data (matplotlib and cartopy libraries).</p>
<p>Additional libraires: os and glob are used for file management</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># If necessary install the dependant libraries, this cell need only be run once:</span>
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>-q<span class="w"> </span>cdsapi
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>-q<span class="w"> </span>xarray
<span class="o">!</span>pip<span class="w"> </span>install<span class="w"> </span>-q<span class="w"> </span>matplotlib<span class="w"> </span>cartopy
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">cdsapi</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">glob</span>
<span class="kn">import</span> <span class="nn">zipfile</span>
<span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">cartopy</span> <span class="kn">import</span> <span class="n">crs</span><span class="p">,</span> <span class="n">feature</span>
</pre></div>
</div>
</div>
</div>
<section id="set-up-an-output-directory-to-store-data-and-plots">
<h3>Set up an output directory to store data and plots<a class="headerlink" href="#set-up-an-output-directory-to-store-data-and-plots" title="Permalink to this heading">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># the output directory name </span>
<span class="n">output_dir</span> <span class="o">=</span> <span class="s1">&#39;output&#39;</span>

<span class="c1"># The output directory must exitst. If it is not the case, it must be created. </span>
<span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">output_dir</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="lake-selection">
<h1>Lake selection<a class="headerlink" href="#lake-selection" title="Permalink to this heading">#</a></h1>
<p>Current version of the Lake Water Level dataset in CDS (v2.1) contains timeseries from 94 lakes. They are provided as a list here to ensure that the selection is valid.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">available_lakes</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s1">&#39;amadjuak&#39;</span><span class="p">,</span> <span class="s1">&#39;argentino&#39;</span><span class="p">,</span> <span class="s1">&#39;athabasca&#39;</span><span class="p">,</span> <span class="s1">&#39;ayakkum&#39;</span><span class="p">,</span> <span class="s1">&#39;aylmer&#39;</span><span class="p">,</span> <span class="s1">&#39;baikal&#39;</span><span class="p">,</span><span class="s1">&#39;baker&#39;</span><span class="p">,</span> <span class="s1">&#39;balbina&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;balkhash&#39;</span><span class="p">,</span> <span class="s1">&#39;beysehir&#39;</span><span class="p">,</span> <span class="s1">&#39;bosten&#39;</span><span class="p">,</span> <span class="s1">&#39;bratskoye&#39;</span><span class="p">,</span><span class="s1">&#39;cahora_bassa&#39;</span><span class="p">,</span> <span class="s1">&#39;caribou&#39;</span><span class="p">,</span> <span class="s1">&#39;caspian&#39;</span><span class="p">,</span> <span class="s1">&#39;cedar&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;chardarya&#39;</span><span class="p">,</span> <span class="s1">&#39;dagze_co&#39;</span><span class="p">,</span><span class="s1">&#39;des_bois&#39;</span><span class="p">,</span> <span class="s1">&#39;dogaicoring_q&#39;</span><span class="p">,</span> <span class="s1">&#39;dubawnt&#39;</span><span class="p">,</span><span class="s1">&#39;erie&#39;</span><span class="p">,</span> <span class="s1">&#39;fort_peck&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;grande_trois&#39;</span><span class="p">,</span><span class="s1">&#39;greatslave&#39;</span><span class="p">,</span> <span class="s1">&#39;guri&#39;</span><span class="p">,</span> <span class="s1">&#39;har&#39;</span><span class="p">,</span><span class="s1">&#39;hongze&#39;</span><span class="p">,</span> <span class="s1">&#39;hovsgol&#39;</span><span class="p">,</span> <span class="s1">&#39;hulun&#39;</span><span class="p">,</span><span class="s1">&#39;huron&#39;</span><span class="p">,</span> <span class="s1">&#39;issykkul&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;kainji&#39;</span><span class="p">,</span><span class="s1">&#39;kapchagayskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;kara_bogaz_gol&#39;</span><span class="p">,</span> <span class="s1">&#39;kariba&#39;</span><span class="p">,</span><span class="s1">&#39;kasba&#39;</span><span class="p">,</span> <span class="s1">&#39;khanka&#39;</span><span class="p">,</span> <span class="s1">&#39;kokonor&#39;</span><span class="p">,</span>
    <span class="s1">&#39;krasnoyarskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;kremenchutska&#39;</span><span class="p">,</span> <span class="s1">&#39;kuybyshevskoye&#39;</span><span class="p">,</span><span class="s1">&#39;kyoga&#39;</span><span class="p">,</span> <span class="s1">&#39;ladoga&#39;</span><span class="p">,</span> <span class="s1">&#39;lagoa_dos_patos&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;langa_co&#39;</span><span class="p">,</span> <span class="s1">&#39;lixiodain_co&#39;</span><span class="p">,</span> <span class="s1">&#39;malawi&#39;</span><span class="p">,</span><span class="s1">&#39;manitoba&#39;</span><span class="p">,</span> <span class="s1">&#39;michigan&#39;</span><span class="p">,</span> <span class="s1">&#39;migriggyangzham&#39;</span><span class="p">,</span> <span class="s1">&#39;mossoul&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;mweru&#39;</span><span class="p">,</span> <span class="s1">&#39;namco&#39;</span><span class="p">,</span> <span class="s1">&#39;nasser&#39;</span><span class="p">,</span> <span class="s1">&#39;ngangze&#39;</span><span class="p">,</span> <span class="s1">&#39;ngoring_co&#39;</span><span class="p">,</span> <span class="s1">&#39;nicaragua&#39;</span><span class="p">,</span> <span class="s1">&#39;novosibirskoye&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;nueltin&#39;</span><span class="p">,</span><span class="s1">&#39;onega&#39;</span><span class="p">,</span> <span class="s1">&#39;ontario&#39;</span><span class="p">,</span> <span class="s1">&#39;opinac&#39;</span><span class="p">,</span><span class="s1">&#39;peipus&#39;</span><span class="p">,</span> <span class="s1">&#39;rukwa&#39;</span><span class="p">,</span> <span class="s1">&#39;rybinskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;saint_jean&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;sakakawea&#39;</span><span class="p">,</span> <span class="s1">&#39;saksak&#39;</span><span class="p">,</span><span class="s1">&#39;saratovskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;sarykamish&#39;</span><span class="p">,</span> <span class="s1">&#39;sasykkol&#39;</span><span class="p">,</span><span class="s1">&#39;soungari&#39;</span><span class="p">,</span> <span class="s1">&#39;superior&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;tana&#39;</span><span class="p">,</span><span class="s1">&#39;tanganika&#39;</span><span class="p">,</span> <span class="s1">&#39;tangra_yumco&#39;</span><span class="p">,</span> <span class="s1">&#39;tchad&#39;</span><span class="p">,</span><span class="s1">&#39;tchany&#39;</span><span class="p">,</span> <span class="s1">&#39;tharthar&#39;</span><span class="p">,</span> <span class="s1">&#39;todos_los_santos&#39;</span><span class="p">,</span>
    <span class="s1">&#39;tsimlyanskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;turkana&#39;</span><span class="p">,</span> <span class="s1">&#39;ulungur&#39;</span><span class="p">,</span><span class="s1">&#39;vanerm&#39;</span><span class="p">,</span> <span class="s1">&#39;victoria&#39;</span><span class="p">,</span> <span class="s1">&#39;volta&#39;</span><span class="p">,</span><span class="s1">&#39;williston&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;winnipeg&#39;</span><span class="p">,</span> <span class="s1">&#39;winnipegosis&#39;</span><span class="p">,</span><span class="s1">&#39;yellowstone&#39;</span><span class="p">,</span> <span class="s1">&#39;zeyskoye&#39;</span><span class="p">,</span> <span class="s1">&#39;zhari_namco&#39;</span><span class="p">,</span><span class="s1">&#39;ziling&#39;</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<p>Provide the name of the lake you wish to visualise in the in the lake_name. A quick test is performed to ensure that the lake is available in the dataset.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># the name of the lake</span>
<span class="n">lake_name</span> <span class="o">=</span> <span class="s2">&quot;Baikal&quot;</span>

<span class="k">if</span> <span class="n">lake_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">available_lakes</span> <span class="p">:</span>
    <span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The lake &quot;</span><span class="si">{</span><span class="n">lake_name</span><span class="si">}</span><span class="s1">&quot; is not still available&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="dowload-and-decompress-data">
<h2>1. Dowload and decompress data<a class="headerlink" href="#dowload-and-decompress-data" title="Permalink to this heading">#</a></h2>
<p>Having the CDS api, this function will retrive the  data for the selected lake into the defined output directory. The downloaded file is compressed (zip format) containing the data file in NetCDF format. For reading the lake water level data, the file will be extracted in the output directory.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span> <span class="p">(</span><span class="n">lake_name</span><span class="o">.</span><span class="n">lower</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">cdsapi</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
<span class="n">c</span><span class="o">.</span><span class="n">retrieve</span><span class="p">(</span> <span class="s1">&#39;satellite-lake-water-level&#39;</span><span class="p">,</span>
            <span class="p">{</span>
                <span class="s1">&#39;lake&#39;</span><span class="p">:</span> <span class="p">[</span><span class="n">lake_name</span><span class="o">.</span><span class="n">lower</span><span class="p">()],</span>
                <span class="s1">&#39;variable&#39;</span><span class="p">:</span> <span class="s1">&#39;water_surface_height&#39;</span><span class="p">,</span>
                <span class="s1">&#39;format&#39;</span><span class="p">:</span> <span class="s1">&#39;zip&#39;</span> <span class="c1"># valid formats: zip, tar and tgz</span>
            <span class="p">},</span>
           <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">lake_name</span><span class="si">}</span><span class="s1">.zip&#39;</span>
           <span class="p">)</span>

<span class="k">with</span> <span class="n">zipfile</span><span class="o">.</span><span class="n">ZipFile</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">lake_name</span><span class="si">}</span><span class="s1">.zip&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">z</span><span class="p">:</span>
    <span class="n">z</span><span class="o">.</span><span class="n">extractall</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    
<span class="c1"># recover the lake filename in netcdf format</span>
<span class="n">nc_file</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">/*</span><span class="si">{</span><span class="n">lake_name</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="si">}</span><span class="s1">*.nc&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># open the file with Xarray</span>
<span class="n">xr_lake</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">nc_file</span><span class="p">)</span>
<span class="n">xr_lake</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2023-07-19 08:43:03,931 INFO Welcome to the CDS
2023-07-19 08:43:03,932 INFO Sending request to https://cds.climate.copernicus.eu/api/v2/resources/satellite-lake-water-level
</pre></div>
</div>
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;built-in method lower of str object at 0x15a088970&gt;
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>2023-07-19 08:43:04,077 INFO Request is completed
2023-07-19 08:43:04,080 INFO Downloading https://download-0009-clone.copernicus-climate.eu/cache-compute-0009/cache/data7/dataset-satellite-lake-water-level-7bbfbd67-d4c3-4319-b49b-d6257539ea85.zip to output/Baikal.zip (17.2K)
2023-07-19 08:43:04,338 INFO Download rate 67.2K/s
</pre></div>
</div>
<div class="output text_html"><div><svg style="position: absolute; width: 0; height: 0; overflow: hidden">
<defs>
<symbol id="icon-database" viewBox="0 0 32 32">
<path d="M16 0c-8.837 0-16 2.239-16 5v4c0 2.761 7.163 5 16 5s16-2.239 16-5v-4c0-2.761-7.163-5-16-5z"></path>
<path d="M16 17c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
<path d="M16 26c-8.837 0-16-2.239-16-5v6c0 2.761 7.163 5 16 5s16-2.239 16-5v-6c0 2.761-7.163 5-16 5z"></path>
</symbol>
<symbol id="icon-file-text2" viewBox="0 0 32 32">
<path d="M28.681 7.159c-0.694-0.947-1.662-2.053-2.724-3.116s-2.169-2.030-3.116-2.724c-1.612-1.182-2.393-1.319-2.841-1.319h-15.5c-1.378 0-2.5 1.121-2.5 2.5v27c0 1.378 1.122 2.5 2.5 2.5h23c1.378 0 2.5-1.122 2.5-2.5v-19.5c0-0.448-0.137-1.23-1.319-2.841zM24.543 5.457c0.959 0.959 1.712 1.825 2.268 2.543h-4.811v-4.811c0.718 0.556 1.584 1.309 2.543 2.268zM28 29.5c0 0.271-0.229 0.5-0.5 0.5h-23c-0.271 0-0.5-0.229-0.5-0.5v-27c0-0.271 0.229-0.5 0.5-0.5 0 0 15.499-0 15.5 0v7c0 0.552 0.448 1 1 1h7v19.5z"></path>
<path d="M23 26h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 22h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
<path d="M23 18h-14c-0.552 0-1-0.448-1-1s0.448-1 1-1h14c0.552 0 1 0.448 1 1s-0.448 1-1 1z"></path>
</symbol>
</defs>
</svg>
<style>/* CSS stylesheet for displaying xarray objects in jupyterlab.
 *
 */

:root {
  --xr-font-color0: var(--jp-content-font-color0, rgba(0, 0, 0, 1));
  --xr-font-color2: var(--jp-content-font-color2, rgba(0, 0, 0, 0.54));
  --xr-font-color3: var(--jp-content-font-color3, rgba(0, 0, 0, 0.38));
  --xr-border-color: var(--jp-border-color2, #e0e0e0);
  --xr-disabled-color: var(--jp-layout-color3, #bdbdbd);
  --xr-background-color: var(--jp-layout-color0, white);
  --xr-background-color-row-even: var(--jp-layout-color1, white);
  --xr-background-color-row-odd: var(--jp-layout-color2, #eeeeee);
}

html[theme=dark],
body[data-theme=dark],
body.vscode-dark {
  --xr-font-color0: rgba(255, 255, 255, 1);
  --xr-font-color2: rgba(255, 255, 255, 0.54);
  --xr-font-color3: rgba(255, 255, 255, 0.38);
  --xr-border-color: #1F1F1F;
  --xr-disabled-color: #515151;
  --xr-background-color: #111111;
  --xr-background-color-row-even: #111111;
  --xr-background-color-row-odd: #313131;
}

.xr-wrap {
  display: block !important;
  min-width: 300px;
  max-width: 700px;
}

.xr-text-repr-fallback {
  /* fallback to plain text repr when CSS is not injected (untrusted notebook) */
  display: none;
}

.xr-header {
  padding-top: 6px;
  padding-bottom: 6px;
  margin-bottom: 4px;
  border-bottom: solid 1px var(--xr-border-color);
}

.xr-header > div,
.xr-header > ul {
  display: inline;
  margin-top: 0;
  margin-bottom: 0;
}

.xr-obj-type,
.xr-array-name {
  margin-left: 2px;
  margin-right: 10px;
}

.xr-obj-type {
  color: var(--xr-font-color2);
}

.xr-sections {
  padding-left: 0 !important;
  display: grid;
  grid-template-columns: 150px auto auto 1fr 20px 20px;
}

.xr-section-item {
  display: contents;
}

.xr-section-item input {
  display: none;
}

.xr-section-item input + label {
  color: var(--xr-disabled-color);
}

.xr-section-item input:enabled + label {
  cursor: pointer;
  color: var(--xr-font-color2);
}

.xr-section-item input:enabled + label:hover {
  color: var(--xr-font-color0);
}

.xr-section-summary {
  grid-column: 1;
  color: var(--xr-font-color2);
  font-weight: 500;
}

.xr-section-summary > span {
  display: inline-block;
  padding-left: 0.5em;
}

.xr-section-summary-in:disabled + label {
  color: var(--xr-font-color2);
}

.xr-section-summary-in + label:before {
  display: inline-block;
  content: '►';
  font-size: 11px;
  width: 15px;
  text-align: center;
}

.xr-section-summary-in:disabled + label:before {
  color: var(--xr-disabled-color);
}

.xr-section-summary-in:checked + label:before {
  content: '▼';
}

.xr-section-summary-in:checked + label > span {
  display: none;
}

.xr-section-summary,
.xr-section-inline-details {
  padding-top: 4px;
  padding-bottom: 4px;
}

.xr-section-inline-details {
  grid-column: 2 / -1;
}

.xr-section-details {
  display: none;
  grid-column: 1 / -1;
  margin-bottom: 5px;
}

.xr-section-summary-in:checked ~ .xr-section-details {
  display: contents;
}

.xr-array-wrap {
  grid-column: 1 / -1;
  display: grid;
  grid-template-columns: 20px auto;
}

.xr-array-wrap > label {
  grid-column: 1;
  vertical-align: top;
}

.xr-preview {
  color: var(--xr-font-color3);
}

.xr-array-preview,
.xr-array-data {
  padding: 0 5px !important;
  grid-column: 2;
}

.xr-array-data,
.xr-array-in:checked ~ .xr-array-preview {
  display: none;
}

.xr-array-in:checked ~ .xr-array-data,
.xr-array-preview {
  display: inline-block;
}

.xr-dim-list {
  display: inline-block !important;
  list-style: none;
  padding: 0 !important;
  margin: 0;
}

.xr-dim-list li {
  display: inline-block;
  padding: 0;
  margin: 0;
}

.xr-dim-list:before {
  content: '(';
}

.xr-dim-list:after {
  content: ')';
}

.xr-dim-list li:not(:last-child):after {
  content: ',';
  padding-right: 5px;
}

.xr-has-index {
  font-weight: bold;
}

.xr-var-list,
.xr-var-item {
  display: contents;
}

.xr-var-item > div,
.xr-var-item label,
.xr-var-item > .xr-var-name span {
  background-color: var(--xr-background-color-row-even);
  margin-bottom: 0;
}

.xr-var-item > .xr-var-name:hover span {
  padding-right: 5px;
}

.xr-var-list > li:nth-child(odd) > div,
.xr-var-list > li:nth-child(odd) > label,
.xr-var-list > li:nth-child(odd) > .xr-var-name span {
  background-color: var(--xr-background-color-row-odd);
}

.xr-var-name {
  grid-column: 1;
}

.xr-var-dims {
  grid-column: 2;
}

.xr-var-dtype {
  grid-column: 3;
  text-align: right;
  color: var(--xr-font-color2);
}

.xr-var-preview {
  grid-column: 4;
}

.xr-index-preview {
  grid-column: 2 / 5;
  color: var(--xr-font-color2);
}

.xr-var-name,
.xr-var-dims,
.xr-var-dtype,
.xr-preview,
.xr-attrs dt {
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  padding-right: 10px;
}

.xr-var-name:hover,
.xr-var-dims:hover,
.xr-var-dtype:hover,
.xr-attrs dt:hover {
  overflow: visible;
  width: auto;
  z-index: 1;
}

.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  display: none;
  background-color: var(--xr-background-color) !important;
  padding-bottom: 5px !important;
}

.xr-var-attrs-in:checked ~ .xr-var-attrs,
.xr-var-data-in:checked ~ .xr-var-data,
.xr-index-data-in:checked ~ .xr-index-data {
  display: block;
}

.xr-var-data > table {
  float: right;
}

.xr-var-name span,
.xr-var-data,
.xr-index-name div,
.xr-index-data,
.xr-attrs {
  padding-left: 25px !important;
}

.xr-attrs,
.xr-var-attrs,
.xr-var-data,
.xr-index-data {
  grid-column: 1 / -1;
}

dl.xr-attrs {
  padding: 0;
  margin: 0;
  display: grid;
  grid-template-columns: 125px auto;
}

.xr-attrs dt,
.xr-attrs dd {
  padding: 0;
  margin: 0;
  float: left;
  padding-right: 10px;
  width: auto;
}

.xr-attrs dt {
  font-weight: normal;
  grid-column: 1;
}

.xr-attrs dt:hover span {
  display: inline-block;
  background: var(--xr-background-color);
  padding-right: 10px;
}

.xr-attrs dd {
  grid-column: 2;
  white-space: pre-wrap;
  word-break: break-all;
}

.xr-icon-database,
.xr-icon-file-text2,
.xr-no-icon {
  display: inline-block;
  vertical-align: middle;
  width: 1em;
  height: 1.5em !important;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style><pre class='xr-text-repr-fallback'>&lt;xarray.Dataset&gt;
Dimensions:                                     (time: 2002)
Coordinates:
  * time                                        (time) datetime64[ns] 1992-09...
Data variables:
    water_surface_height_above_reference_datum  (time) float64 ...
    water_surface_height_uncertainty            (time) float64 ...
Attributes: (12/42)
    title:                      Lake Water Level from satellite altimetry
    lake:                       Baikal
    basin:                      Yenisei
    country:                    Russia
    lake_barycentre_latitude:   53.58 N
    lake_barycentre_longitude:  108.17 E
    ...                         ...
    processing_mode:            Delayed Time
    processing_level:           LEVEL3B
    copyright:                  Copernicus Climate Change Service
    inspire_theme:              Hydrography
    credit:                     Lake Water Level products are generated by th...
    date_created:               2020-01-29</pre><div class='xr-wrap' style='display:none'><div class='xr-header'><div class='xr-obj-type'>xarray.Dataset</div></div><ul class='xr-sections'><li class='xr-section-item'><input id='section-2d3950f8-c348-412d-8467-a98dfc1af161' class='xr-section-summary-in' type='checkbox' disabled ><label for='section-2d3950f8-c348-412d-8467-a98dfc1af161' class='xr-section-summary'  title='Expand/collapse section'>Dimensions:</label><div class='xr-section-inline-details'><ul class='xr-dim-list'><li><span class='xr-has-index'>time</span>: 2002</li></ul></div><div class='xr-section-details'></div></li><li class='xr-section-item'><input id='section-955a4c07-0759-490b-9db6-52e70a5dfd5b' class='xr-section-summary-in' type='checkbox'  checked><label for='section-955a4c07-0759-490b-9db6-52e70a5dfd5b' class='xr-section-summary' >Coordinates: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span class='xr-has-index'>time</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>datetime64[ns]</div><div class='xr-var-preview xr-preview'>1992-09-27T20:09:00 ... 2020-01-...</div><input id='attrs-0273f5f1-2ccc-4a4b-829f-8f68b0a2134e' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-0273f5f1-2ccc-4a4b-829f-8f68b0a2134e' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-42f4a69c-2cba-4758-8444-703885d8786b' class='xr-var-data-in' type='checkbox'><label for='data-42f4a69c-2cba-4758-8444-703885d8786b' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>time</dd><dt><span>long_name :</span></dt><dd>time</dd></dl></div><div class='xr-var-data'><pre>array([&#x27;1992-09-27T20:09:00.000000000&#x27;, &#x27;1992-10-16T03:21:00.000000000&#x27;,
       &#x27;1992-11-18T01:55:00.000000000&#x27;, ..., &#x27;2020-01-20T15:27:00.000000000&#x27;,
       &#x27;2020-01-26T14:02:00.000000000&#x27;, &#x27;2020-01-27T14:13:00.000000000&#x27;],
      dtype=&#x27;datetime64[ns]&#x27;)</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-e122ae4d-c0e3-4502-b7ca-3f0d974fa8a3' class='xr-section-summary-in' type='checkbox'  checked><label for='section-e122ae4d-c0e3-4502-b7ca-3f0d974fa8a3' class='xr-section-summary' >Data variables: <span>(2)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-var-name'><span>water_surface_height_above_reference_datum</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-30ff215b-2ad6-4822-b1b2-92cb8754345f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-30ff215b-2ad6-4822-b1b2-92cb8754345f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-791f3a26-4a96-49b4-93f2-c23b7bf2415d' class='xr-var-data-in' type='checkbox'><label for='data-791f3a26-4a96-49b4-93f2-c23b7bf2415d' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>water_surface_height_above_reference_datum</dd><dt><span>long_name :</span></dt><dd>water surface height above geoid</dd><dt><span>units :</span></dt><dd>m</dd><dt><span>unit_long :</span></dt><dd>Meters</dd></dl></div><div class='xr-var-data'><pre>[2002 values with dtype=float64]</pre></div></li><li class='xr-var-item'><div class='xr-var-name'><span>water_surface_height_uncertainty</span></div><div class='xr-var-dims'>(time)</div><div class='xr-var-dtype'>float64</div><div class='xr-var-preview xr-preview'>...</div><input id='attrs-f78f1c2e-dc4c-47db-bfea-c69bcb2b8a2f' class='xr-var-attrs-in' type='checkbox' ><label for='attrs-f78f1c2e-dc4c-47db-bfea-c69bcb2b8a2f' title='Show/Hide attributes'><svg class='icon xr-icon-file-text2'><use xlink:href='#icon-file-text2'></use></svg></label><input id='data-8796e91f-f2ed-46ee-a4e0-5096da0fed30' class='xr-var-data-in' type='checkbox'><label for='data-8796e91f-f2ed-46ee-a4e0-5096da0fed30' title='Show/Hide data repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-var-attrs'><dl class='xr-attrs'><dt><span>standard_name :</span></dt><dd>water_surface_height_uncertainty</dd><dt><span>long_name :</span></dt><dd>water surface height uncertainty</dd><dt><span>units :</span></dt><dd>m</dd><dt><span>unit_long :</span></dt><dd>Meters</dd></dl></div><div class='xr-var-data'><pre>[2002 values with dtype=float64]</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-ad8d16a1-d9f9-466d-b554-bc0f3bf3e78e' class='xr-section-summary-in' type='checkbox'  ><label for='section-ad8d16a1-d9f9-466d-b554-bc0f3bf3e78e' class='xr-section-summary' >Indexes: <span>(1)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><ul class='xr-var-list'><li class='xr-var-item'><div class='xr-index-name'><div>time</div></div><div class='xr-index-preview'>PandasIndex</div><div></div><input id='index-9273b071-8e54-4745-aac1-9d46195a17ef' class='xr-index-data-in' type='checkbox'/><label for='index-9273b071-8e54-4745-aac1-9d46195a17ef' title='Show/Hide index repr'><svg class='icon xr-icon-database'><use xlink:href='#icon-database'></use></svg></label><div class='xr-index-data'><pre>PandasIndex(DatetimeIndex([&#x27;1992-09-27 20:09:00&#x27;, &#x27;1992-10-16 03:21:00&#x27;,
               &#x27;1992-11-18 01:55:00&#x27;, &#x27;1992-12-13 16:47:00&#x27;,
               &#x27;1993-03-15 00:00:00&#x27;, &#x27;1993-04-20 12:00:00&#x27;,
               &#x27;1993-05-16 01:12:00&#x27;, &#x27;1993-06-17 21:36:00&#x27;,
               &#x27;1993-07-17 02:24:00&#x27;, &#x27;1993-08-15 07:12:00&#x27;,
               ...
               &#x27;2020-01-10 14:17:00&#x27;, &#x27;2020-01-10 17:28:00&#x27;,
               &#x27;2020-01-11 13:51:00&#x27;, &#x27;2020-01-12 03:39:00&#x27;,
               &#x27;2020-01-16 03:35:00&#x27;, &#x27;2020-01-18 14:09:00&#x27;,
               &#x27;2020-01-20 03:31:00&#x27;, &#x27;2020-01-20 15:27:00&#x27;,
               &#x27;2020-01-26 14:02:00&#x27;, &#x27;2020-01-27 14:13:00&#x27;],
              dtype=&#x27;datetime64[ns]&#x27;, name=&#x27;time&#x27;, length=2002, freq=None))</pre></div></li></ul></div></li><li class='xr-section-item'><input id='section-b98a166d-a35a-4409-9222-6d8e9b08121b' class='xr-section-summary-in' type='checkbox'  ><label for='section-b98a166d-a35a-4409-9222-6d8e9b08121b' class='xr-section-summary' >Attributes: <span>(42)</span></label><div class='xr-section-inline-details'></div><div class='xr-section-details'><dl class='xr-attrs'><dt><span>title :</span></dt><dd>Lake Water Level from satellite altimetry</dd><dt><span>lake :</span></dt><dd>Baikal</dd><dt><span>basin :</span></dt><dd>Yenisei</dd><dt><span>country :</span></dt><dd>Russia</dd><dt><span>lake_barycentre_latitude :</span></dt><dd>53.58 N</dd><dt><span>lake_barycentre_longitude :</span></dt><dd>108.17 E</dd><dt><span>institution :</span></dt><dd>LEGOS, CLS, CNES</dd><dt><span>source :</span></dt><dd>Copernicus Climate Change Service</dd><dt><span>history :</span></dt><dd>Created on 2020-01-30</dd><dt><span>references :</span></dt><dd>https://cds.climate.copernicus.eu/</dd><dt><span>conventions :</span></dt><dd>CF-1.7</dd><dt><span>product_version :</span></dt><dd>v2.1</dd><dt><span>summary :</span></dt><dd>Copernicus Lake Water Level database contains time series over water levels of large lakes around the world</dd><dt><span>id :</span></dt><dd>C3S_LWL_BAIKAL_altimetry_V2.1_19920927_20200127_R20200129.nc</dd><dt><span>keywords_vocabulary :</span></dt><dd>GCMD, GEMET and is19115 keywords</dd><dt><span>gcmd_keywords :</span></dt><dd>TERRESTRIAL HYDROSPHERE, SURFACE WATER</dd><dt><span>gemet_keywords :</span></dt><dd>water level, water management, hydrometry, hydrology, climate, seasonal variation, environmental data, environmental monitoring, monitoring, remote sensing</dd><dt><span>iso19115_topic_categories :</span></dt><dd>elevation,inlandWaters</dd><dt><span>cdm_data_type :</span></dt><dd>vector</dd><dt><span>comment :</span></dt><dd></dd><dt><span>creator_name :</span></dt><dd>LEGOS, CLS, CNES</dd><dt><span>creator_url :</span></dt><dd>http://www.legos.obs-mip.fr, https://www.cls.fr/, https://cnes.fr/</dd><dt><span>creator_email :</span></dt><dd>contact.hydroweb@cls.fr</dd><dt><span>project :</span></dt><dd>Copernicus Climate Change Service - C3S</dd><dt><span>geospatial_lat_min :</span></dt><dd>-90.0</dd><dt><span>geospatial_lat_max :</span></dt><dd>90.0</dd><dt><span>geospatial_lon_min :</span></dt><dd>-180.0</dd><dt><span>geospatial_lon_max :</span></dt><dd>180.0</dd><dt><span>time_coverage_start :</span></dt><dd>1992-09-27</dd><dt><span>time_coverage_end :</span></dt><dd>2020-01-27</dd><dt><span>time_coverage_duration :</span></dt><dd>P27Y8M16D</dd><dt><span>standard_name_vocabulary :</span></dt><dd>NetCDF Climate and Forecast (CF)</dd><dt><span>license :</span></dt><dd>Free after registration</dd><dt><span>platform :</span></dt><dd>Topex/Poseidon, Jason-1, Jason-2, Jason-3, Envisat, GFO, SARAL, Sentinel3A</dd><dt><span>sensor :</span></dt><dd>Poseidon Ku, Poseidon 2Ku, Poseidon 3Ku, Poseidon 3Bku, RA-2, RA Ku, Altika Ka, SRAL Ku</dd><dt><span>key_variables :</span></dt><dd>water_surface_height_above_reference_datum, water_surface_height_uncertainty</dd><dt><span>processing_mode :</span></dt><dd>Delayed Time</dd><dt><span>processing_level :</span></dt><dd>LEVEL3B</dd><dt><span>copyright :</span></dt><dd>Copernicus Climate Change Service</dd><dt><span>inspire_theme :</span></dt><dd>Hydrography</dd><dt><span>credit :</span></dt><dd>Lake Water Level products are generated by the Copernicus Climate Change Servies, the Earth Observation Programme of the European Commission and the Theia-land program supported by CNES. The research leading to the current version of the product has received funding from CNES, LEGOS, IRD and CLS.</dd><dt><span>date_created :</span></dt><dd>2020-01-29</dd></dl></div></li></ul></div></div></div></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="visualise-lake-location">
<h1>2. Visualise lake location<a class="headerlink" href="#visualise-lake-location" title="Permalink to this heading">#</a></h1>
<p>It is always a useful idea to check the lake’s location on a map. Many of the world’s lakes have the same name but may be located in different countries, as in the case of Lake Victoria: the best known is in Uganda, but there is also a Lake Victoria in Canada (48.35N, 57.11W) and another in Australia (34.04S, 141.28E). Or the name of the lake is different, depending on the language: Caribou Lake or Rendeer lake refer to the same lake (Canada). In some cases, even with the same language, lake name can differ between countries: Lake Buenos Aires in Argentina and Lake General Carrera in Chili.</p>
<p>A world map, with the location of the lake is displayed. For generating this figure we use the cartopy library.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span> <span class="n">projection</span> <span class="o">=</span> <span class="n">crs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>

<span class="n">ax</span><span class="o">.</span><span class="n">coastlines</span><span class="p">()</span>
<span class="n">ax</span><span class="o">.</span><span class="n">add_feature</span><span class="p">(</span><span class="n">feature</span><span class="o">.</span><span class="n">BORDERS</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">stock_img</span><span class="p">()</span>

<span class="c1"># add lake location </span>
<span class="n">lat</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xr_lake</span><span class="o">.</span><span class="n">lake_barycentre_latitude</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">if</span> <span class="s1">&#39;S&#39;</span> <span class="ow">in</span> <span class="n">xr_lake</span><span class="o">.</span><span class="n">lake_barycentre_latitude</span><span class="p">:</span>
    <span class="n">lat</span> <span class="o">=</span> <span class="o">-</span><span class="n">lat</span>
<span class="n">lon</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">xr_lake</span><span class="o">.</span><span class="n">lake_barycentre_longitude</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">if</span> <span class="s1">&#39;W&#39;</span> <span class="ow">in</span> <span class="n">xr_lake</span><span class="o">.</span><span class="n">lake_barycentre_longitude</span><span class="p">:</span>
    <span class="n">lon</span> <span class="o">=</span> <span class="o">-</span><span class="n">lon</span>
    
<span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Lake location (lat, lon): </span><span class="si">{</span><span class="n">lat</span><span class="si">}</span><span class="s2">°, </span><span class="si">{</span><span class="n">lon</span><span class="si">}</span><span class="s2">°&quot;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">lon</span><span class="p">],</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[</span><span class="n">lat</span><span class="p">],</span> <span class="n">s</span> <span class="o">=</span> <span class="mi">30</span><span class="p">,</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="n">transform</span> <span class="o">=</span> <span class="n">crs</span><span class="o">.</span><span class="n">PlateCarree</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Lake location (lat, lon): 53.58°, 108.17°
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;matplotlib.collections.PathCollection at 0x162889cc0&gt;
</pre></div>
</div>
<img alt="../_images/d733abffa611be0039cf3097c7d10914883146fe2261d5b8746bacf43d34b058.png" src="../_images/d733abffa611be0039cf3097c7d10914883146fe2261d5b8746bacf43d34b058.png" />
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="visualise-lake-water-level-time-series">
<h1>3. Visualise lake water level time series<a class="headerlink" href="#visualise-lake-water-level-time-series" title="Permalink to this heading">#</a></h1>
<p>Now that the data has been extracted, we can read it and plot it. To read the data in NetCDF format we use the Xarray library and for the visualisation of the time series we use Matplotlib</p>
<p>The figure with the timeseries will be saved in the output directory in png format:
[lake_name]_timeseries.png file</p>
<p>The change in time step due to coverage by multiple missions can be seen in the figure: in recent years, Lake Baikal has been monitored by multiple missions and trajectories. As a result, the temporal resolution increases (the time between observations is reduced) and the time series is noisier due to the effect of the inter-mission and inter-tracks bias.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># plot and visualise the timeseries</span>
<span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span> <span class="o">=</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">xr_lake</span><span class="o">.</span><span class="n">water_surface_height_above_reference_datum</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Lake: </span><span class="si">{</span><span class="n">lake_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1"># save the figure</span>
<span class="n">png_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">lake_name</span><span class="si">}</span><span class="s1">_timeseries.png&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">png_file</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s2">&quot;tight&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/f5c1c111b171fc11a1133a9e1bb5959c51797a3cc3eae29918944172e029bbac.png" src="../_images/f5c1c111b171fc11a1133a9e1bb5959c51797a3cc3eae29918944172e029bbac.png" />
</div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="visualise-lake-water-level-yearly-anomalies">
<h1>3. Visualise lake water level yearly anomalies<a class="headerlink" href="#visualise-lake-water-level-yearly-anomalies" title="Permalink to this heading">#</a></h1>
<p>Another way of analysing variations in water levels is to visualise anomalies in relation to average values over a reference period in the form of a bar chart, using red and blue colours to easily identify the year when levels are higher or lower than the climatic normal.</p>
<p>The same code can be used for the visualiation of yearly anomalies compared to a particular year.</p>
<p>The reference period can be adapted to each lake. Indeed, the temporal coverage is not the same for all the lakes in the CDS, with the first available date ranging from 1992, as is the case for Lake Baikal, to 2019 for lakes monitored exclusively by the Sentinel-3B mission. In this example for Lake Baikal, we have chosen a reference period consisting of the first 10 years of data.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">first_reference_year</span> <span class="o">=</span> <span class="mi">1992</span>
<span class="n">last_reference_year</span>  <span class="o">=</span> <span class="mi">2002</span>
</pre></div>
</div>
</div>
</div>
<p>The yearly anomaly is calculated by first applying xarray’s groupby() function to group the data by year and then calculating the mean value for each annual group. The average value of the water in the reference lake is estimated as the average water level over the reference period.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">yearly_mean</span> <span class="o">=</span> <span class="n">xr_lake</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;time.year&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">keep_attrs</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>

<span class="n">ref</span> <span class="o">=</span> <span class="n">yearly_mean</span><span class="o">.</span><span class="n">where</span><span class="p">((</span><span class="n">yearly_mean</span><span class="o">.</span><span class="n">year</span> <span class="o">&gt;=</span> <span class="n">first_reference_year</span> <span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">yearly_mean</span><span class="o">.</span><span class="n">year</span> <span class="o">&lt;=</span> <span class="n">last_reference_year</span> <span class="p">))</span>
<span class="n">ref_lwl_mean</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">nanmean</span><span class="p">(</span><span class="n">ref</span><span class="o">.</span><span class="n">water_surface_height_above_reference_datum</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>

<span class="nb">print</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Mean LWL value during the reference period: </span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">ref_lwl_mean</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="si">}</span><span class="s1"> (m)&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Mean LWL value during the reference period: 455.386 (m)
</pre></div>
</div>
</div>
</div>
<p>The yearly anomaly is shown in red for values above the average water level during the reference period and in blue for values below.</p>
<p>The figure with the anomalies is saved in the output directory in png format :
[lake_name]_yearly-anomalies.png file</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">year_mean</span> <span class="o">=</span> <span class="n">yearly_mean</span><span class="o">.</span><span class="n">to_dataframe</span><span class="p">()</span>
<span class="n">year_mean</span><span class="p">[</span><span class="s1">&#39;lwl_yearly_anomaly&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">year_mean</span><span class="p">[</span><span class="s1">&#39;water_surface_height_above_reference_datum&#39;</span><span class="p">]</span> <span class="o">-</span> <span class="n">ref_lwl_mean</span>
<span class="n">year_mean</span><span class="p">[</span><span class="s1">&#39;positive_anomaly&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">year_mean</span><span class="p">[</span><span class="s1">&#39;lwl_yearly_anomaly&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">year_mean</span><span class="p">[</span><span class="s1">&#39;lwl_yearly_anomaly&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> 
                                     <span class="n">color</span> <span class="o">=</span> <span class="n">year_mean</span><span class="o">.</span><span class="n">positive_anomaly</span><span class="o">.</span><span class="n">map</span> <span class="p">({</span><span class="kc">True</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="kc">False</span><span class="p">:</span> <span class="s1">&#39;blue&#39;</span><span class="p">}),</span>
                                     <span class="n">xlabel</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">Year&#39;</span><span class="p">,</span>
                                     <span class="n">ylabel</span> <span class="o">=</span> <span class="s1">&#39;Lake Water Level Anomaly (m)&#39;</span><span class="p">,</span>
                                     <span class="n">title</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Yearly water level anomalies on Lake </span><span class="si">{</span><span class="n">lake_name</span><span class="o">.</span><span class="n">title</span><span class="p">()</span><span class="si">}</span><span class="se">\n</span><span class="s1"> reference period:  </span><span class="si">{</span><span class="n">first_reference_year</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">last_reference_year</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">()</span>

<span class="c1"># save the figure</span>
<span class="n">png_file</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">output_dir</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">lake_name</span><span class="si">}</span><span class="s1">_yearly-anomalies.png&#39;</span>
<span class="n">plt</span><span class="o">.</span><span class="n">savefig</span><span class="p">(</span><span class="n">png_file</span><span class="p">,</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">bbox_inches</span><span class="o">=</span><span class="s1">&#39;tight&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/97529ea9cd212a7c263c12cd0559b57d237bb664cefdb4952712b1b4958cdb1e.png" src="../_images/97529ea9cd212a7c263c12cd0559b57d237bb664cefdb4952712b1b4958cdb1e.png" />
</div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./ecv-notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

            </article>
            

            
            
            <footer class="bd-footer-article">
                <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='left-prev' id="prev-link" href="soil-moisture-anomalies.html" title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
          <p class="prev-next-subtitle">previous</p>
          <p class="prev-next-title"><strong>C3S Soil Moisture Data Access and Anomaly Analysis Notebook</strong></p>
      </div>
  </a>
  <a class='right-next' id="next-link" href="lake-surface-water-temperature.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">Visualising Lake Surface Water Temperature (LSWT) as timeseries at one location on a given lake and the spatial distribution of the LSWT for a given day</p>
  </div>
  <i class="fa-solid fa-angle-right"></i>
  </a>
</div>
            </footer>
            
          </div>
          
          
          
            <div class="bd-sidebar-secondary bd-toc">
              
<div class="toc-item">
  
<div class="tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
</div>
<nav id="bd-toc-nav" class="page-toc">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#">
   Tutorial: Visualising Lake Water Level (LWL) timeseries
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#import-librairies">
     Import librairies
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h3 nav-item toc-entry">
      <a class="reference internal nav-link" href="#set-up-an-output-directory-to-store-data-and-plots">
       Set up an output directory to store data and plots
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#lake-selection">
   Lake selection
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h2 nav-item toc-entry">
    <a class="reference internal nav-link" href="#dowload-and-decompress-data">
     1. Dowload and decompress data
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-location">
   2. Visualise lake location
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-water-level-time-series">
   3. Visualise lake water level time series
  </a>
 </li>
 <li class="toc-h1 nav-item toc-entry">
  <a class="reference internal nav-link" href="#visualise-lake-water-level-yearly-anomalies">
   3. Visualise lake water level yearly anomalies
  </a>
 </li>
</ul>

</nav>
</div>

            </div>
          
          
        </div>
        <footer class="bd-footer-content">
          <div class="bd-footer-content__inner">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By the Copernicus Climate Change Service (C3S), entrusted to ECMWF (European Centre for Medium-Range Weather Forecasts)
</p>

  </div>
  
  <div class="footer-item">
    
<p class="copyright">

    &copy; Copyright 2022.<br>

</p>

  </div>
  
  <div class="footer-item">
    <p class="last-updated">
Last updated on None.<br>
</p>
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </div>
        </footer>
        

      </main>
    </div>
  </div>

  
    
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=796348d33e8b1d947c94"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=796348d33e8b1d947c94"></script>

  </body>
</html>